<!DOCTYPE html>
<html>
<head>
	<title>2H后发送Ajax请求</title>
	<meta charset="utf-8">

</head>
2H后发送Ajax请求：
<p class="time" time="1539343135" name="userId"></p>
<body>
<script>

	// 2小时后自动发送Ajax请求
	// 设计思路：给定2小时后的时间搓；那现在的时间，每秒都和给定的这个时间戳进行对比
	function TwoH(){
	    setInterval(function(){
			var elArr=document.getElementsByClassName('time');
				Time= parseInt(new Date().getTime() /1000);
			for(var i=0;i<elArr.length;i++){
				tCuo=elArr[i].getAttribute('time')-Time;
				// 显示倒计时
				elArr[i].innerHTML= parseInt(tCuo / 3600) +':'+ parseInt(tCuo / 60>=59? tCuo / 60 -60:tCuo / 60) + ':'+ parseInt(tCuo % 60 );
				//当过了2小时后 清楚 响应的html内容，和属性 ，并发送相应的ajax请求
				if(tCuo < 0){
					elArr[i].innerHTML='';
					elArr[i].setAttribute('class',''); 
					//调用ajax请求方法
					// chexiaoAjax(elArr[i].getAttribute('name'));
				}
			}
		},1000);
	};
	TwoH();
</script>
</body>
</html>