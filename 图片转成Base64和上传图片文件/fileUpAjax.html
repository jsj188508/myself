<!DOCTYPE html>
<html>
<head>
	<title>运行再服务器上传图片文件 IE10+</title>
	<meta charset="utf-8">
</head>
<body>
<label>
    <!--添加这个属性 multiple="multiple" 实现选中多张图片  -->
     <!-- accept="image/gif, image/jpeg, image/jpg, image/png" 指定上传文件的类型 -->
	<input  multiple="multiple"  type="file" accept="image/*" id="inputfile1" value="1" name="pic"/>
	上传图片文件
    <!-- <img id="target0"> -->
    <!-- <img id="target1"> -->
</label>
<script src="./zepto.js"></script>
<!-- <script src="./jquery-1.11.0.min.js"></script> -->

<script type="text/javascript">
$(document).ready(function () {
    //响应文件添加成功事件
    $("#inputfile1").change(function () {
        var fileArr=document.querySelector('[type="file"]').files,
            wUrl=window.URL || window.webkitURL || window,
            objURL ='',
            data={};
            // data=new FormData();
        for(var i=0;i<=fileArr.length-1;i++){
            // 记得要释放objUrl //在上传之前处理文件的url能够使用img标签显示
            objURL = wUrl.createObjectURL(fileArr[i])
            $("#target"+i).attr('src',objURL)
            $(this).parent().append("<img width='640px' height='350px' id=target"+i+" src=" + objURL +" />");
            // data['file'+i]= $("#target"+i).attr('src'); //以对象属性的方式传入后端
            data['file'+i]=objURL;                   //以对象属性的方式传入后端
            // data['file'+i]= new  FormData(objURL);   //以formData对象的形式转给后端
        }
        console.dir(data.file0)
        var _this = $(this).parent();
        //发送数据
        // $.ajax({
        //     url: '/ajax/imgUser',
        //     type: 'POST',
        //     data: data,
        //     cache: false,
        //     contentType: false,		//不可缺参数
        //     processData: false,		//不可缺参数
        //     success: function (data) {
        //         if (data) {
        //             if (data == "error") {
        //                 alert("{:L('UP_FILE_ERROR')}！");
        //                 return false;
        //             }
        //             if (data == "error2") {
        //                 alert("{:L('UP_FILR_MUCH_ERROR')}！");
        //                 return false;
        //             }
        //             _this.html("< img  src='__DOMAIN__/Upload/idcard/"+ data +"'  style='height:140px;width:200px;background: rgba(0,0,0,.3);display: inline-block;vertical-align: middle;'/>")
        //             $('.set_upload_img').show();
        //             if ($('.set_upload_img').find('img').length >= 3) {
        //                 $('#shang_qq_chuandiv').hide();
        //                 alert("{:L('UP_FILR_MUCH_SUCCESS')}");
        //             }
        //         }
        //     },
        //     error: function () {
        //         alert("{:L('UPLOAD_ERROR')}");
        //         $('.set_upload_img').hide();
        //         //$(".loading").hide();	//加载失败移除加载图片
        //     }
        // });
    });
});
</script>
</body>
</html>